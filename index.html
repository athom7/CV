<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Brent Companion - DJ√òF Cover Letter Checker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: #2b2b2b;
            color: #f0f0f0;
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
        }

        /* Welcome Screen - Dave The Diver Style */
        .welcome-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background: linear-gradient(to bottom, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            position: relative;
        }

        .skip-button {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 215, 0, 0.2);
            border: 2px solid #ffd700;
            color: #ffd700;
            padding: 10px 20px;
            font-size: 0.9rem;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            transition: all 0.2s;
        }

        .skip-button:hover {
            background: rgba(255, 215, 0, 0.4);
        }

        .intro-content {
            text-align: center;
            max-width: 800px;
            padding: 40px;
        }

        .brent-intro-sprite {
            width: 200px;
            height: 200px;
            margin: 0 auto 30px;
            background: linear-gradient(to bottom,
                #f4c2a5 0%, #f4c2a5 30%,
                #ffffff 30%, #ffffff 40%,
                #333333 40%, #333333 70%,
                #666666 70%, #666666 100%
            );
            position: relative;
            border: 3px solid #000;
            animation: brent-idle 2s ease-in-out infinite;
        }

        @keyframes brent-idle {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .brent-intro-sprite::before {
            content: '';
            position: absolute;
            top: 15%;
            left: 25%;
            width: 50%;
            height: 15%;
            background: #8b4513;
        }

        .brent-intro-sprite::after {
            content: 'üòé';
            position: absolute;
            top: 35%;
            left: 50%;
            transform: translateX(-50%);
            font-size: 3rem;
        }

        .intro-text {
            font-size: 1.3rem;
            line-height: 2;
            color: #ffd700;
            margin-bottom: 30px;
            text-shadow: 2px 2px 0 #000;
            min-height: 120px;
        }

        .intro-text-line {
            opacity: 0;
            animation: fade-in-up 0.5s ease-out forwards;
        }

        @keyframes fade-in-up {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .continue-button {
            background: #ffd700;
            border: 4px solid #000;
            padding: 20px 50px;
            font-size: 1.5rem;
            font-family: 'Courier New', monospace;
            cursor: pointer;
            color: #000;
            font-weight: bold;
            transition: all 0.1s;
            box-shadow: 6px 6px 0 #000;
            opacity: 0;
            animation: fade-in 0.5s ease-out 3s forwards;
        }

        .continue-button:hover {
            background: #ffed4e;
            transform: translate(-2px, -2px);
            box-shadow: 8px 8px 0 #000;
        }

        .continue-button:active {
            transform: translate(2px, 2px);
            box-shadow: 3px 3px 0 #000;
        }

        /* Section Selection Screen */
        .section-selection {
            max-width: 1000px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .section-selection h1 {
            text-align: center;
            font-size: 2.5rem;
            color: #ffd700;
            text-shadow: 3px 3px 0 #000;
            margin-bottom: 20px;
        }

        .section-selection-intro {
            text-align: center;
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 40px;
            color: #f0f0f0;
            background: #3a3a3a;
            padding: 30px;
            border: 3px solid #8b8b8b;
        }

        .section-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .section-button {
            background: #4a4a4a;
            border: 4px solid #8b8b8b;
            padding: 30px 20px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: left;
        }

        .section-button:hover {
            background: #5a5a5a;
            border-color: #ffd700;
            transform: translate(-3px, -3px);
            box-shadow: 6px 6px 0 rgba(0, 0, 0, 0.3);
        }

        .section-button h3 {
            color: #ffd700;
            font-size: 1.4rem;
            margin-bottom: 10px;
        }

        .section-button p {
            color: #f0f0f0;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .section-button-footer {
            margin-top: 15px;
            font-size: 0.85rem;
            color: #aaa;
            font-style: italic;
        }

        /* Evaluation Screen */
        .evaluation-screen {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            padding: 20px;
        }

        .office-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.15;
            pointer-events: none;
        }

        .office-background.scene-office {
            background:
                linear-gradient(to bottom, rgba(139, 69, 19, 0.3) 0%, transparent 20%),
                radial-gradient(circle at 30% 40%, rgba(255, 215, 0, 0.1) 0%, transparent 40%),
                #2b2b2b;
        }

        .evaluation-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .evaluation-header h2 {
            color: #ffd700;
            font-size: 1.8rem;
            text-shadow: 2px 2px 0 #000;
            margin-bottom: 10px;
        }

        .back-button {
            background: #3a3a3a;
            border: 2px solid #8b8b8b;
            padding: 10px 20px;
            font-size: 0.9rem;
            color: #ffd700;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            margin-bottom: 20px;
        }

        .back-button:hover {
            background: #4a4a4a;
            border-color: #ffd700;
        }

        /* Completed Evaluations Stack */
        .evaluations-stack {
            max-width: 900px;
            margin: 0 auto 20px;
            width: 100%;
        }

        .completed-evaluation {
            background: #3a3a3a;
            border: 3px solid #4ade80;
            margin-bottom: 15px;
            border-radius: 0;
        }

        .evaluation-header-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            cursor: pointer;
            background: #4a4a4a;
        }

        .evaluation-header-bar:hover {
            background: #5a5a5a;
        }

        .evaluation-title {
            font-size: 1.2rem;
            color: #ffd700;
            font-weight: bold;
        }

        .evaluation-toggle {
            color: #f0f0f0;
            font-size: 1.5rem;
        }

        .evaluation-details {
            padding: 20px;
            border-top: 2px solid #5a5a5a;
        }

        .evaluation-details.collapsed {
            display: none;
        }

        .criterion-result {
            background: #2b2b2b;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid #ffd700;
        }

        .criterion-result h4 {
            color: #ffd700;
            margin-bottom: 10px;
            font-size: 1rem;
        }

        .criterion-score {
            font-size: 1.5rem;
            color: #4ade80;
            margin-bottom: 10px;
        }

        .criterion-result p {
            line-height: 1.6;
            color: #f0f0f0;
        }

        /* Main Text Box */
        .text-box-container {
            max-width: 900px;
            margin: 0 auto;
            width: 100%;
        }

        .text-box-frame {
            background: #3a3a3a;
            border: 4px solid #8b8b8b;
            padding: 25px;
            box-shadow: 8px 8px 0 rgba(0, 0, 0, 0.3);
        }

        .text-box-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #5a5a5a;
        }

        .text-box-header h3 {
            color: #ffd700;
            font-size: 1.4rem;
        }

        .section-badge {
            background: #ffd700;
            color: #000;
            padding: 5px 15px;
            font-size: 0.85rem;
            font-weight: bold;
            border: 2px solid #000;
        }

        textarea {
            width: 100%;
            min-height: 300px;
            padding: 20px;
            background: #2b2b2b;
            border: 3px solid #5a5a5a;
            color: #f0f0f0;
            font-family: 'Courier New', monospace;
            font-size: 1.1rem;
            line-height: 1.8;
            resize: vertical;
        }

        textarea:focus {
            outline: none;
            border-color: #ffd700;
        }

        .evaluate-button {
            background: #ffd700;
            border: 4px solid #000;
            padding: 15px 40px;
            font-size: 1.3rem;
            font-family: 'Courier New', monospace;
            cursor: pointer;
            color: #000;
            font-weight: bold;
            margin-top: 20px;
            width: 100%;
            transition: all 0.1s;
            box-shadow: 5px 5px 0 #000;
        }

        .evaluate-button:hover {
            background: #ffed4e;
            transform: translate(-2px, -2px);
            box-shadow: 7px 7px 0 #000;
        }

        .evaluate-button:active {
            transform: translate(2px, 2px);
            box-shadow: 2px 2px 0 #000;
        }

        .evaluate-button:disabled {
            background: #666;
            cursor: not-allowed;
            opacity: 0.5;
        }

        /* Evaluation Feedback */
        .evaluation-feedback {
            max-width: 900px;
            margin: 30px auto 0;
            width: 100%;
        }

        .character-feedback {
            background: #3a3a3a;
            border: 4px solid #ffd700;
            padding: 30px;
            margin-bottom: 20px;
            position: relative;
        }

        .character-sprite {
            width: 150px;
            height: 150px;
            margin: 0 auto 20px;
            position: relative;
        }

        /* Brent sprite animations */
        .brent-sprite {
            width: 150px;
            height: 150px;
            background: linear-gradient(to bottom,
                #f4c2a5 0%, #f4c2a5 30%,
                #ffffff 30%, #ffffff 40%,
                #333333 40%, #333333 70%,
                #666666 70%, #666666 100%
            );
            border: 3px solid #000;
            position: relative;
            animation: brent-gesture 3s ease-in-out;
        }

        @keyframes brent-gesture {
            0%, 100% { transform: rotate(0deg) scale(1); }
            15% { transform: rotate(-5deg) scale(1.02); }
            30% { transform: rotate(5deg) scale(0.98); }
            45% { transform: rotate(-3deg) scale(1.01); }
            60% { transform: rotate(0deg) scale(1); }
        }

        .brent-sprite::before {
            content: '';
            position: absolute;
            top: 15%;
            left: 25%;
            width: 50%;
            height: 15%;
            background: #8b4513;
        }

        .brent-sprite::after {
            content: 'ü§î';
            position: absolute;
            top: 35%;
            left: 50%;
            transform: translateX(-50%);
            font-size: 2.5rem;
        }

        /* Tim sprite with "the look" */
        .tim-sprite {
            width: 120px;
            height: 120px;
            background: linear-gradient(to bottom,
                #8b4513 0%, #8b4513 20%,
                #f4c2a5 20%, #f4c2a5 40%,
                #4169e1 40%, #4169e1 60%,
                #2c5282 60%, #2c5282 100%
            );
            border: 2px solid #000;
            position: relative;
            margin: 0 auto;
            animation: tim-look 3s ease-in-out;
        }

        @keyframes tim-look {
            0%, 20%, 100% { transform: rotateY(0deg) scale(1); }
            35%, 85% { transform: rotateY(15deg) scale(1.08); }
        }

        .tim-sprite::before {
            content: '';
            position: absolute;
            top: 10%;
            left: 20%;
            width: 60%;
            height: 12%;
            background: #654321;
        }

        .tim-sprite::after {
            content: 'ü§®';
            position: absolute;
            top: 25%;
            left: 50%;
            transform: translateX(-50%);
            font-size: 2rem;
        }

        /* Gareth sprite with enthusiasm */
        .gareth-sprite {
            width: 120px;
            height: 120px;
            background: linear-gradient(to bottom,
                #d4a574 0%, #d4a574 25%,
                #f4c2a5 25%, #f4c2a5 45%,
                #ffffff 45%, #ffffff 60%,
                #4a5568 60%, #4a5568 100%
            );
            border: 2px solid #000;
            position: relative;
            margin: 0 auto;
            animation: gareth-enthusiastic 2s ease-in-out;
        }

        @keyframes gareth-enthusiastic {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-10px) rotate(-5deg); }
            50% { transform: translateY(-5px) rotate(5deg); }
            75% { transform: translateY(-8px) rotate(-3deg); }
        }

        .gareth-sprite::before {
            content: '';
            position: absolute;
            top: 8%;
            left: 15%;
            width: 70%;
            height: 18%;
            background: #c9a86a;
        }

        .gareth-sprite::after {
            content: 'üò§';
            position: absolute;
            top: 28%;
            left: 50%;
            transform: translateX(-50%);
            font-size: 2rem;
        }

        .character-name {
            color: #ffd700;
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 15px;
            text-transform: uppercase;
        }

        .character-dialogue {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #f0f0f0;
        }

        .next-button {
            background: #4ade80;
            border: 4px solid #000;
            padding: 15px 40px;
            font-size: 1.2rem;
            font-family: 'Courier New', monospace;
            cursor: pointer;
            color: #000;
            font-weight: bold;
            margin-top: 20px;
            transition: all 0.1s;
            box-shadow: 5px 5px 0 #000;
        }

        .next-button:hover {
            background: #5ef590;
            transform: translate(-2px, -2px);
            box-shadow: 7px 7px 0 #000;
        }

        @media (max-width: 768px) {
            .section-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // DJ√òF Section Definitions
        const DJOF_SECTIONS = [
            {
                id: 'overskrift',
                name: 'Overskrift',
                description: 'Subject line - Eye-catching header',
                order: 1,
                criteria: ['motivation', 'conciseness']
            },
            {
                id: 'motivationsafsnit',
                name: 'Motivationsafsnit',
                description: 'Motivation - Why this job/company',
                order: 2,
                criteria: ['motivation', 'matching', 'conciseness']
            },
            {
                id: 'fagligt_bidrag_1',
                name: 'Fagligt bidrag 1',
                description: 'Professional contribution 1 - Key competencies with examples',
                order: 3,
                criteria: ['matching', 'results', 'conciseness']
            },
            {
                id: 'fagligt_bidrag_2',
                name: 'Fagligt bidrag 2',
                description: 'Professional contribution 2 - Additional qualifications',
                order: 4,
                criteria: ['matching', 'results', 'conciseness']
            },
            {
                id: 'personligt_bidrag',
                name: 'Personligt bidrag',
                description: 'Personal contribution - Work style, colleague experience',
                order: 5,
                criteria: ['value', 'conciseness']
            },
            {
                id: 'afslutning',
                name: 'Afslutning',
                description: 'Closing - Interview request, availability',
                order: 6,
                criteria: ['value', 'conciseness']
            }
        ];

        // Criteria definitions
        const CRITERIA_INFO = {
            motivation: {
                name: 'Motivation Specificity',
                question: 'How specific is this about what interests you in THIS particular role/company?'
            },
            matching: {
                name: 'Job Ad Matching',
                question: 'Can the recruiter instantly see how you meet their specific requirements?'
            },
            value: {
                name: 'Employer Value Focus',
                question: 'Are you explaining what THEY gain, or what you gain?'
            },
            results: {
                name: 'Concrete Results',
                question: 'Did you include measurable, quantifiable results using STAR method?'
            },
            conciseness: {
                name: 'Conciseness',
                question: 'Is this concise, fluff-free, and contributing to a one-page application?'
            }
        };

        // Section-specific dialogue (tailored for each section type)
        const SECTION_DIALOGUE = {
            overskrift: {
                motivation: {
                    low: "Right, your subject line. This is generic, innit? 'Application for position' - yeah, they know that. You need to grab their attention by showing you understand what the job is actually about. Reference something specific from their job ad or company - show them you've done your homework. Make them think 'this person gets it' before they even open the letter.",
                    medium: "Subject line's getting there, but you can make it more specific. You've shown some understanding, but drill down. What exactly about this role caught your eye? Reference their specific challenge or goal from the job ad. Make the recruiter think 'this person actually read what we need' just from the header. That's the impact you want.",
                    high: "Perfect subject line. Specific, shows you understand what they're looking for, references the actual role. The recruiter can instantly see you've engaged with their job ad, not just copy-pasted a generic header. That's professional. That's someone who pays attention. Exactly what you want."
                },
                conciseness: {
                    low: "The subject line is too long. This isn't a novel, it's a header. Six to ten words maximum - enough to be specific but not rambling. Think of it like a newspaper headline - punchy, clear, gets the point across. Cut it down.",
                    medium: "Decent length, but you could tighten it up. Every word in a subject line needs to earn its place. Is there any redundancy? Any words you could remove without losing meaning? Make it sharp.",
                    high: "Excellent conciseness. Clear, specific, not a word wasted. That's a professional subject line right there. Shows you respect their time even in the header."
                }
            },
            motivationsafsnit: {
                motivation: {
                    low: "Motivation paragraph, yeah. Big problem here - you're being generic. 'I'm passionate,' 'I'm motivated' - everyone says that. It's like me saying 'I'm a good manager' without explaining why. You need to tell them what SPECIFICALLY interests you about THEIR work. What problems they're solving that you want to be part of. What aspect of their mission resonates with you. Make it concrete, not generic platitudes.",
                    medium: "You've got some motivation showing through, but it's still a bit vague. You've mentioned you're interested, but what exactly? What specific aspect of their work gets you excited? What would you be doing day-to-day that appeals to you? The research shows 63% of employers say specific motivation is crucial - so make it razor-sharp specific.",
                    high: "Now THAT'S specific motivation. You've explained exactly what about their work interests you, what problems you want to solve for them, why this particular organization appeals to you. That's the difference between 'I want a job' and 'I want THIS job.' Excellent work."
                },
                matching: {
                    low: "You haven't connected your motivation to their actual requirements. It's like me talking about my music skills when they asked about management - nice, but irrelevant. Show them how what motivates you MATCHES what they need. Link your interests to their specific needs from the job ad.",
                    medium: "You've made some connections between your motivation and their needs, but make it more explicit. Use language from their job ad. If they mention 'stakeholder engagement,' and that's what interests you, use those exact words. Make the connection impossible to miss.",
                    high: "Perfect matching. You've shown how your specific motivation aligns with their specific needs. The recruiter can instantly see 'this person wants what we need them to do.' That's the match you're looking for."
                },
                conciseness: {
                    low: "This motivation paragraph is too long. You're rambling. One focused paragraph - maybe five to seven sentences that clearly explain what specifically interests you and why. Cut the fluff, cut the generic statements, get to the point.",
                    medium: "Reasonable length, but you could trim it. Look for redundancy, remove any sentence that doesn't add new information. Remember, they're spending 2 minutes 18 seconds reading your entire application. Every word counts.",
                    high: "Perfect length for a motivation paragraph. Concise, focused, every sentence adds value. This is professional writing - say what you need to say, then stop."
                }
            },
            fagligt_bidrag_1: {
                matching: {
                    low: "Professional contribution, right. You're talking about your skills, but you haven't linked them to what they actually asked for. Go through their job ad - what are their need-to-have requirements? Then show EXACTLY how you meet each one. Don't make them hunt for the connection.",
                    medium: "You've mentioned relevant experience, but make the matching more explicit. The recruiter should be able to tick boxes: 'project management - yes, they've got it. Data analysis - yes, there it is.' Make it brain-dead simple to see you have what they need.",
                    high: "Excellent job ad matching. You've clearly addressed their requirements with specific examples. The recruiter can instantly see you've got what they're looking for. That's efficient, professional application writing."
                },
                results: {
                    low: "Where are your results? You've described what you did, but not what actually happened because you did it. Use STAR method - Situation, Task, Action, and most importantly, RESULT. With numbers. 'Increased efficiency by 30%' not 'helped improve things.' Make it concrete.",
                    medium: "You've got some results mentioned, but quantify them more. Every achievement needs a measurable element. Time saved, money earned, percentage improved, number of people impacted. You're close, just add the specific numbers that prove the impact.",
                    high: "Perfect. Concrete, measurable results with full STAR method. The recruiter can see exactly what you achieved with numbers to back it up. This is credible evidence you can deliver value."
                },
                conciseness: {
                    low: "Too long. Professional contribution should be one focused paragraph with one or two clear STAR examples. You're overexplaining. Cut it down to the essentials - what you did, what the result was, how it's relevant to this job.",
                    medium: "Decent length, but still some fat to trim. Can you combine any sentences? Remove any unnecessary qualifiers? Make every word work for you. Aim for maximum impact in minimum space.",
                    high: "Excellent conciseness. One tight paragraph showing exactly what you bring, with concrete results, no fluff. That's professional communication."
                }
            },
            fagligt_bidrag_2: {
                matching: {
                    low: "Second professional contribution - same issue. You're not matching their requirements clearly enough. They have a shopping list of skills they need - show them you have those specific items. Use their language from the job ad.",
                    medium: "You're addressing some requirements, but could be more direct. Mirror their exact terminology from the job ad. If they say 'stakeholder management,' use 'stakeholder management' not 'working with people.' Make the connection explicit.",
                    high: "Spot on. You've addressed their specific requirements with clear, relevant examples. The recruiter can tick another box - this person has what we're looking for. Exactly what you want."
                },
                results: {
                    low: "Again, where are your measurable results? Don't just list what you did - show what changed because you did it. Situation, Task, Action, RESULT. With numbers. That's what makes it credible and impressive.",
                    medium: "You've mentioned outcomes, but make them more concrete. Add specific percentages, timeframes, quantities. Turn 'successful project' into 'delivered project 2 weeks early, 15% under budget, leading to contract renewal worth ¬£200K.' That level of detail.",
                    high: "Excellent results. Specific, measurable, credible. This gives the recruiter confidence you can actually deliver, because you've proven you've delivered before with concrete evidence."
                },
                conciseness: {
                    low: "This is getting long. Second professional contribution should be similarly tight to the first - one paragraph, one or two examples max. You don't need to list everything you've ever done. Pick what's most relevant to this role and present it concisely.",
                    medium: "Reasonable length, but could be tighter. Every sentence should directly support 'I have this skill they need, here's proof.' If it doesn't do that, cut it.",
                    high: "Perfect length. Concise, focused, demonstrates your qualifications without waffling. Professional writing at its best."
                }
            },
            personligt_bidrag: {
                value: {
                    low: "Personal contribution - big issue. You're talking about what YOU gain from working with people, not what THEY gain from working with you. Flip it. What kind of colleague are you? What do teams get when they work with you? How do you make other people's jobs easier? That's what they want to know.",
                    medium: "You've got some employer value in here, but it's mixed with your own benefits. Focus entirely on what they gain. Not 'I enjoy learning from others' but 'I actively share knowledge and help colleagues develop skills.' See the difference? Employer-focused.",
                    high: "Perfect employer value focus. You've explained what kind of colleague you are, what teams gain from working with you, how you contribute to a positive work environment. That's what they're hiring for - someone who makes the workplace better."
                },
                conciseness: {
                    low: "Too long for personal contribution. This should be a tight paragraph - three to five sentences that paint a clear picture of what you're like as a colleague. Cut the rambling, focus on the key attributes that matter for this role.",
                    medium: "Decent length, but could trim it. Personal contribution doesn't need to be lengthy - just clear and specific about the kind of colleague you are. Remove any redundancy.",
                    high: "Excellent conciseness. Brief, clear picture of what you're like to work with. That's all they need for this section - efficient and professional."
                }
            },
            afslutning: {
                value: {
                    low: "Closing paragraph - you're focused on what you want again. 'I look forward to developing my skills' - they don't care about your development in the closing. They care about what they get. Try: 'I'm ready to contribute to [specific goal] and would welcome the opportunity to discuss how my experience in [relevant area] can support your team.' See the difference? Employer-focused.",
                    medium: "Your closing has some employer focus, but tighten it up. The last thing they read should reinforce what value you bring and your genuine interest in contributing to their work. Less about you, more about them.",
                    high: "Perfect closing. You've reinforced your value proposition, shown genuine interest in their work, and made it about what you can do for them. That's how you end strong."
                },
                conciseness: {
                    low: "Closing is too long. This should be brief - three to four sentences max. Express availability for interview, reiterate interest, done. You're overcomplicating it.",
                    medium: "Reasonable length, but could be shorter. Closing doesn't need extensive detail - just confirm your interest and availability. Keep it tight.",
                    high: "Perfect closing length. Brief, professional, clear. You've wrapped it up efficiently without waffling. Exactly right."
                }
            }
        };

        // Tim's deadpan reality checks (for high self-ratings)
        const TIM_DIALOGUE = [
            "Ten out of ten. Right.",
            "Yeah, I'm sure the recruiter will be thrilled.",
            "*looks at camera*",
            "Good luck with that.",
            "Bold choice.",
            "If you say so.",
            "Yeah... no, that's great. Really great."
        ];

        // Gareth's enthusiastic misunderstandings
        const GARETH_DIALOGUE = [
            "David's absolutely right! When I wrote my application for Team Leader, I didn't bother with specifics either. Still don't know why I didn't get it.",
            "Exactly what David said! I learned everything about applications from him. Well, I've never actually gotten a job from an application, but the principle is sound.",
            "This is why David's the boss. He knows what he's talking about. He's kept this job for years. That's... that's an achievement."
        ];

        function WelcomeScreen({ onContinue }) {
            const [animationStep, setAnimationStep] = useState(0);

            useEffect(() => {
                const timer1 = setTimeout(() => setAnimationStep(1), 500);
                const timer2 = setTimeout(() => setAnimationStep(2), 2000);
                const timer3 = setTimeout(() => setAnimationStep(3), 3500);
                return () => {
                    clearTimeout(timer1);
                    clearTimeout(timer2);
                    clearTimeout(timer3);
                };
            }, []);

            return (
                <div className="welcome-screen">
                    <button className="skip-button" onClick={onContinue}>
                        SKIP ‚Üí
                    </button>
                    <div className="intro-content">
                        <div className="brent-intro-sprite"></div>
                        <div className="intro-text">
                            {animationStep >= 1 && (
                                <div className="intro-text-line" style={{animationDelay: '0s'}}>
                                    "Right, so you want to write a job application..."
                                </div>
                            )}
                            {animationStep >= 2 && (
                                <div className="intro-text-line" style={{animationDelay: '0s'}}>
                                    "I'm David Brent. Management expert. Guitar enthusiast."
                                </div>
                            )}
                            {animationStep >= 3 && (
                                <div className="intro-text-line" style={{animationDelay: '0s'}}>
                                    "Let's make sure your DJ√òF cover letter doesn't embarrass you."
                                </div>
                            )}
                        </div>
                        {animationStep >= 3 && (
                            <button className="continue-button" onClick={onContinue}>
                                LET'S GO
                            </button>
                        )}
                    </div>
                </div>
            );
        }

        function SectionSelection({ onSelectSection }) {
            return (
                <div className="container">
                    <div className="section-selection">
                        <h1>SELECT A SECTION TO EVALUATE</h1>
                        <div className="section-selection-intro">
                            <p>
                                Danish DJ√òF cover letters follow a specific structure. Select which section
                                you want to evaluate, paste your text, and get targeted feedback based on
                                what actually matters for that section.
                            </p>
                            <p style={{marginTop: '15px', fontStyle: 'italic', color: '#ffd700'}}>
                                Your completed evaluations will stack above in proper DJ√òF order.
                            </p>
                        </div>
                        <div className="section-grid">
                            {DJOF_SECTIONS.map(section => (
                                <button
                                    key={section.id}
                                    className="section-button"
                                    onClick={() => onSelectSection(section)}
                                >
                                    <h3>{section.name}</h3>
                                    <p>{section.description}</p>
                                    <div className="section-button-footer">
                                        Evaluates: {section.criteria.map(c => CRITERIA_INFO[c].name).join(', ')}
                                    </div>
                                </button>
                            ))}
                        </div>
                    </div>
                </div>
            );
        }

        function EvaluationScreen({
            selectedSection,
            completedEvaluations,
            onBackToSelection,
            onEvaluationComplete
        }) {
            const [text, setText] = useState('');
            const [currentCriterionIndex, setCurrentCriterionIndex] = useState(null);
            const [currentScore, setCurrentScore] = useState(5);
            const [showingFeedback, setShowingFeedback] = useState(false);
            const [feedback, setFeedback] = useState('');
            const [extraCharacter, setExtraCharacter] = useState(null);
            const [extraDialogue, setExtraDialogue] = useState('');
            const [criteriaResults, setCriteriaResults] = useState([]);

            const criteria = selectedSection.criteria;

            const handleStartEvaluation = () => {
                if (text.trim()) {
                    setCurrentCriterionIndex(0);
                    setCurrentScore(5);
                    setCriteriaResults([]);
                }
            };

            const handleScoreSubmit = () => {
                const criterionId = criteria[currentCriterionIndex];
                const scoreRange = currentScore <= 3 ? 'low' : currentScore <= 7 ? 'medium' : 'high';
                const dialogue = SECTION_DIALOGUE[selectedSection.id][criterionId][scoreRange];

                setFeedback(dialogue);

                // Tim appears 20% on high scores (8-10)
                let character = null;
                let charDialogue = '';
                if (currentScore >= 8 && Math.random() < 0.2) {
                    character = 'tim';
                    charDialogue = TIM_DIALOGUE[Math.floor(Math.random() * TIM_DIALOGUE.length)];
                }
                // Gareth appears 10% randomly
                else if (Math.random() < 0.1) {
                    character = 'gareth';
                    charDialogue = GARETH_DIALOGUE[Math.floor(Math.random() * GARETH_DIALOGUE.length)];
                }

                setExtraCharacter(character);
                setExtraDialogue(charDialogue);
                setShowingFeedback(true);

                // Save this criterion result
                const newResult = {
                    criterionId,
                    criterionName: CRITERIA_INFO[criterionId].name,
                    score: currentScore,
                    feedback: dialogue
                };
                setCriteriaResults([...criteriaResults, newResult]);
            };

            const handleNext = () => {
                setShowingFeedback(false);
                setExtraCharacter(null);

                if (currentCriterionIndex < criteria.length - 1) {
                    setCurrentCriterionIndex(currentCriterionIndex + 1);
                    setCurrentScore(5);
                } else {
                    // Evaluation complete for this section
                    onEvaluationComplete({
                        section: selectedSection,
                        text: text,
                        results: [...criteriaResults, {
                            criterionId: criteria[currentCriterionIndex],
                            criterionName: CRITERIA_INFO[criteria[currentCriterionIndex]].name,
                            score: currentScore,
                            feedback: feedback
                        }]
                    });
                    // Reset for next section
                    setText('');
                    setCurrentCriterionIndex(null);
                    setCriteriaResults([]);
                }
            };

            const isEvaluating = currentCriterionIndex !== null;
            const currentCriterionId = isEvaluating ? criteria[currentCriterionIndex] : null;
            const currentCriterionInfo = currentCriterionId ? CRITERIA_INFO[currentCriterionId] : null;

            // Sort completed evaluations by DJ√òF order
            const sortedEvaluations = [...completedEvaluations].sort((a, b) =>
                a.section.order - b.section.order
            );

            return (
                <div className="evaluation-screen">
                    <div className="office-background scene-office"></div>

                    <button className="back-button" onClick={onBackToSelection}>
                        ‚Üê BACK TO SECTION SELECTION
                    </button>

                    <div className="evaluation-header">
                        <h2>Evaluating: {selectedSection.name}</h2>
                    </div>

                    {/* Completed Evaluations Stack */}
                    {sortedEvaluations.length > 0 && (
                        <div className="evaluations-stack">
                            {sortedEvaluations.map((evaluation, index) => (
                                <CompletedEvaluation
                                    key={`${evaluation.section.id}-${index}`}
                                    evaluation={evaluation}
                                />
                            ))}
                        </div>
                    )}

                    {/* Main Text Box */}
                    <div className="text-box-container">
                        <div className="text-box-frame">
                            <div className="text-box-header">
                                <h3>Your Text</h3>
                                <span className="section-badge">{selectedSection.name}</span>
                            </div>
                            <textarea
                                value={text}
                                onChange={(e) => setText(e.target.value)}
                                placeholder={`Paste your ${selectedSection.name.toLowerCase()} text here...`}
                                disabled={isEvaluating}
                            />
                            {!isEvaluating && (
                                <button
                                    className="evaluate-button"
                                    onClick={handleStartEvaluation}
                                    disabled={!text.trim()}
                                >
                                    START EVALUATION
                                </button>
                            )}
                        </div>
                    </div>

                    {/* Evaluation Interface */}
                    {isEvaluating && !showingFeedback && (
                        <div className="evaluation-feedback">
                            <div className="character-feedback">
                                <h3 style={{color: '#ffd700', marginBottom: '20px', textAlign: 'center'}}>
                                    {currentCriterionInfo.name}
                                </h3>
                                <p style={{fontSize: '1.1rem', textAlign: 'center', marginBottom: '30px'}}>
                                    {currentCriterionInfo.question}
                                </p>
                                <div style={{textAlign: 'center'}}>
                                    <input
                                        type="range"
                                        min="1"
                                        max="10"
                                        value={currentScore}
                                        onChange={(e) => setCurrentScore(parseInt(e.target.value))}
                                        style={{width: '80%', height: '12px', margin: '20px 0'}}
                                    />
                                    <div style={{fontSize: '2rem', color: '#ffd700', marginBottom: '20px'}}>
                                        {currentScore}/10
                                    </div>
                                    <button className="evaluate-button" onClick={handleScoreSubmit}>
                                        SUBMIT SCORE
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Feedback Display */}
                    {showingFeedback && (
                        <div className="evaluation-feedback">
                            <div className="character-feedback">
                                <div className="brent-sprite"></div>
                                <div className="character-name">David Brent:</div>
                                <div className="character-dialogue">{feedback}</div>

                                {extraCharacter === 'tim' && (
                                    <div style={{marginTop: '30px'}}>
                                        <div className="tim-sprite"></div>
                                        <div className="character-name" style={{textAlign: 'center', marginTop: '15px'}}>
                                            Tim:
                                        </div>
                                        <div className="character-dialogue" style={{textAlign: 'center', fontStyle: 'italic'}}>
                                            {extraDialogue}
                                        </div>
                                    </div>
                                )}

                                {extraCharacter === 'gareth' && (
                                    <div style={{marginTop: '30px'}}>
                                        <div className="gareth-sprite"></div>
                                        <div className="character-name" style={{textAlign: 'center', marginTop: '15px'}}>
                                            Gareth:
                                        </div>
                                        <div className="character-dialogue" style={{textAlign: 'center', fontStyle: 'italic'}}>
                                            {extraDialogue}
                                        </div>
                                    </div>
                                )}

                                <div style={{textAlign: 'center'}}>
                                    <button className="next-button" onClick={handleNext}>
                                        {currentCriterionIndex < criteria.length - 1 ? 'NEXT CRITERION' : 'COMPLETE EVALUATION'}
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        function CompletedEvaluation({ evaluation }) {
            const [isExpanded, setIsExpanded] = useState(false);

            return (
                <div className="completed-evaluation">
                    <div
                        className="evaluation-header-bar"
                        onClick={() => setIsExpanded(!isExpanded)}
                    >
                        <div className="evaluation-title">
                            ‚úì {evaluation.section.name}
                        </div>
                        <div className="evaluation-toggle">
                            {isExpanded ? '‚ñº' : '‚ñ∂'}
                        </div>
                    </div>
                    <div className={`evaluation-details ${isExpanded ? '' : 'collapsed'}`}>
                        <div style={{
                            background: '#2b2b2b',
                            padding: '15px',
                            marginBottom: '15px',
                            borderLeft: '4px solid #8b8b8b',
                            fontStyle: 'italic',
                            fontSize: '0.95rem',
                            maxHeight: '150px',
                            overflow: 'auto'
                        }}>
                            {evaluation.text}
                        </div>
                        {evaluation.results.map((result, index) => (
                            <div key={index} className="criterion-result">
                                <h4>{result.criterionName}</h4>
                                <div className="criterion-score">Score: {result.score}/10</div>
                                <p>{result.feedback}</p>
                            </div>
                        ))}
                    </div>
                </div>
            );
        }

        function App() {
            const [screen, setScreen] = useState('welcome');
            const [selectedSection, setSelectedSection] = useState(null);
            const [completedEvaluations, setCompletedEvaluations] = useState([]);

            const handleContinueFromWelcome = () => {
                setScreen('section-selection');
            };

            const handleSelectSection = (section) => {
                setSelectedSection(section);
                setScreen('evaluation');
            };

            const handleBackToSelection = () => {
                setSelectedSection(null);
                setScreen('section-selection');
            };

            const handleEvaluationComplete = (evaluationData) => {
                setCompletedEvaluations([...completedEvaluations, evaluationData]);
                // Stay on evaluation screen so user can select another section
            };

            return (
                <>
                    {screen === 'welcome' && (
                        <WelcomeScreen onContinue={handleContinueFromWelcome} />
                    )}
                    {screen === 'section-selection' && (
                        <SectionSelection onSelectSection={handleSelectSection} />
                    )}
                    {screen === 'evaluation' && (
                        <EvaluationScreen
                            selectedSection={selectedSection}
                            completedEvaluations={completedEvaluations}
                            onBackToSelection={handleBackToSelection}
                            onEvaluationComplete={handleEvaluationComplete}
                        />
                    )}
                </>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
